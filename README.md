# CinemaBooking
# Техническое задание
### Цель проекта
Разработка веб-приложения для бронирования мест в кинотеатре, упрощающего процесс покупки билетов и повышающего удобство для пользователей.
### Основные функциональные возможности
- Просмотр расписания сеансов и доступных мест в зале.
- Регистрация и аутентификация пользователей.
- Выбор мест и бронирование билетов.
- Просмотр истории бронирований для зарегистрированных пользователей.
- Управление администратором: добавление/удаление фильмов, редактирование расписания.

## Функциональные требования
### Неавторизованный пользователь
- Просмотр расписания сеансов.
- Просмотр доступных мест в зале.
- Регистрация и вход в систему.

### Авторизованный пользователь
- Выбор фильма и просмотр подробной информации.
- Выбор сеанса и мест в зале.
- Бронирование выбранных мест.
- Просмотр истории своих бронирований.

### Администратор
- Добавление/удаление фильмов и сеансов
- Редактирование расписания.

## Технологический стек
### Язык программирования
PHP
### Система управления базами данных
MySQL
### Фреймворк для фронтенда
Bootstrap
### Сервер
Apache

# Пользовательские сценарии
## Сценарий работы пользователя
Посетитель сайта, первоначально ознакомившись с главной страницей, получает предложение об авторизации. При выборе опции "Авторизоваться" и последующем вводе данных, пользователь перенаправляется на страницу авторизации, где используется виджет Telegram для процедуры аутентификации. После успешной авторизации посетитель попадает в свой профиль, где может просматривать историю предыдущих бронирований билетов в кино. В разделе "Выбор билета" пользователь, нажимая кнопку "Купить билет", переходит на страницу выбора билета, где осуществляет выбор нужного фильма и определение места в кинозале.

# Сценарии работы администратора:
В личном кабинете администратора предоставлен доступ к "Административной панели". После перехода в нее, администратор может просматривать информацию о пользователях, бронированиях на киносеансы и местах в кинозале. Возможности администратора включают в себя управление пользователями, позволяя назначать или снимать их с должности администратора, а также удалять пользователей из системы. В разделе "Кино" администратор имеет доступ к списку всех добавленных фильмов с возможностью добавления новых, редактирования информации о существующих и удаления фильмов. Секции "Бронирование" и "Места" предоставляют администратору обзор записей о бронировании билетов и мест в кинозале соответственно, а также предоставляют возможности добавления новых мест и удаления ненужных.

# Документация
#### Пример документации
```
openapi: 3.0.0
info:
  title: CinemaBooking API
  version: "1.0"
paths:
  /auth/telegram:
    post:
      summary: Авторизация пользователя через Telegram
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
                telegram_id:
                  type: integer
                telegram_username:
                  type: string
                profile_picture:
                  type: string
                auth_date:
                  type: integer
      responses:
        '200':
          description: Успешная аутентификация
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  redirect_url:
                    type: string
                    example: /user/profile.php
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/auth/logout:
    get:
      summary: Выход пользователя из системы
      responses:
        '302':
          description: Redirect to the home page
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/profile:
    get:
      summary: Полученить информацию о профиле пользователя
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: Unauthorized
  /api/bookings:
    get:
      summary: Получить историю бронирований пользователей
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Booking'
        '401':
          description: Unauthorized
```
#### Список всех методов
```
GET:
/api/auth/logout — Выход пользователя из системы
/api/profile — Получить информацию о профиле пользователя
/api/bookings — Получить историю бронирований пользователя
/api/movies — Получить список фильмов
/api/success — Получение информации об успешном бронировании
/api/admin/movies — Получение списка всех фильмов
/api/admin/allUsers — Получить список всех пользователей
/api/admin/allSeats — Получение списка всех мест в зале
/api/admin/allOrders — Получение списка всех бронирований

POST:
/api/auth/auth — Авторизация пользователя через Telegram
/api/tickets — Купить билет в кино
/api/admin/movies — Добавить новый фильм
/api/admin/allUsers — Изменение прав пользователя
/api/admin/allSeats — Добавление нового места в зале

PUT:
/api/admin/movies/{movieId} — Обновление данных фильма

DELETE:
/api/admin/movies/{movieId} — Удалить фильм
/api/admin/allSeats/{seat_id} — Удалить место в зале по его ID
/api/admin/allOrders/{order_id} — Удалить заказ по ID
```

# Описание базы данных
### Таблица bookings

| Поле             | Тип           | Описание                                      |
|------------------|---------------|-----------------------------------------------|
| `id`             | int(11)       | Уникальный идентификатор бронирования         |
| `user_id`        | int(11)       | Идентификатор пользователя, сделавшего бронь  |
| `movie_id`       | int(11)       | Идентификатор фильма, на который сделана бронь |
| `seat_number`    | varchar(10)   | Номер места                                  |
| `reservation_time` | timestamp    | Время бронирования (по умолчанию текущее время)|
| `movie_name`     | varchar(64)   | Название фильма                              |

### Таблица movies

| Поле         | Тип           | Описание                           |
|--------------|---------------|------------------------------------|
| `id`         | int(11)       | Уникальный идентификатор фильма   |
| `movie_name` | varchar(64)   | Название фильма                   |

### Таблица seats

| Поле         | Тип           | Описание                           |
|--------------|---------------|------------------------------------|
| `id`         | int(11)       | Уникальный идентификатор места    |
| `seat_number`| varchar(10)   | Номер места                        |

### Таблица users

| Поле               | Тип           | Описание                                      |
|--------------------|---------------|-----------------------------------------------|
| `id`               | int(11)       | Уникальный идентификатор пользователя         |
| `first_name`       | varchar(64)   | Имя пользователя                             |
| `last_name`        | varchar(64)   | Фамилия пользователя (по умолчанию NULL)     |
| `telegram_id`      | varchar(32)   | Идентификатор пользователя в Telegram        |
| `telegram_username`| varchar(64)   | Имя пользователя в Telegram (по умолчанию NULL) |
| `profile_picture`  | varchar(128)  | Путь к изображению профиля (по умолчанию NULL) |
| `auth_date`        | varchar(16)   | Дата аутентификации пользователя в Telegram  |
| `added`            | timestamp     | Время создания записи пользователя           |
| `updated`          | timestamp     | Время последнего обновления записи пользователя |
| `is_admin`         | tinyint(1)    | Флаг администратора (по умолчанию 0)         |

# Интерфейс
![index](https://i.imgur.com/9D3XbGm.jpg)
![login](https://i.imgur.com/DSJq3k7.jpg)
![tickets](https://i.imgur.com/I8J1QAs.jpg)
![order](https://i.imgur.com/ISMuCCn.jpg)

# Скрины проекта
![index](https://i.imgur.com/9AMGB8E.jpg)

# Вывод
Разработано веб-приложение на PHP с использованием MySQL и Bootstrap для бронирования билетов в кинотеатре, включая функциональности просмотра расписания, выбора мест, регистрации, бронирования, а также управления администратором, с документированным API и наглядным пользовательским интерфейсом.